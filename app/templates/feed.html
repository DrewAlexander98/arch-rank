{% extends "sidebar-base.html" %}

{% block content %}
<div class="feedbox">
     <div id="feed">
          <p>Feed</p>
          <a href="{{ url_for('logout')}}">Logout</a>
          <div class="container">
               <div class="tab--slider">
                    <ul class="tab--tabs">
                         <li class="tab-slider--trigger active" rel="report-tab">
                              Report
                         </li>
                         <li class="tab-slider--trigger" rel="status-tab">
                              Status
                         </li>
                    </ul>
               </div>
               <div class="tab--container">
                    <div id="report-tab" class="tab--body">
                         <form method="post">
                              {{ form.hidden_tag() }}
                              <div class="form-body">
                                   {{ form.body(size=140) }} 
                              </div>
                              <div class="form-actions">
                                   <div class="form-actions--container">
                                        {{ form.traitor(size=8) }}
                                        {{ form.category }}
                                   </div>
                                   <div class="form-button">
                                        {{ form.report_submit() }}
                                   </div>
                              </div>
                         </form>
                    </div>

                    <div id="status-tab" class="tab--body">
                         <form method="post">
                              {{ status_input.hidden_tag() }}
                              <div class="form-body">
                                   {{ status_input.status(size=140) }}
                              </div>
                              <div class="form-actions">
                                   <div class="form-actions--container">
                                        {{ status_input.status_category }}
                                   </div>
                                   <div class="form-button">
                                        {{ status_input.status_submit() }}
                                   </div>
                              </div>
                         </form>
                    </div>
               </div>
          </div>
          <div>
               <h3>Recent Reports</h3>
               {% for report in reports %}
                    {{ report.reporter_id }}
                    {{ report.reported_id }}
                    {{ report.report_category }}
                    {{ report.time }}
                    {{ report.body }}
               {% endfor %}
          </div>

          <div>
               <h3>Recent Status</h3>
               {% for status in statuses %}
                    {{ status.citizen_id }}
                    {{ status.body }}
                    {{ status.timestamp }}
                    {{ status.status_category }}
               {% endfor %}

          </div>
     </div>
</div>
<script>
    $("document").ready(function(){
           $(".tab--body").hide();
           $(".tab--body:first").show();
      });

      $(".tab--slider li").click(function() {
           $(".tab--body").hide();
           var activeTab = $(this).attr("rel");
           $("#" + activeTab).fadeIn();
                if ($(this).attr("rel") == "status-tab"){
                     $('.tab--tabs').addClass('slide');
                }
                else{
                     $('.tab--tabs').removeClass('slide');
                }
           $(".tab--slider li").removeClass("active");
           $(this).addClass("active");
      });
 </script>
{% endblock content %}